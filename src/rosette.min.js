/*! rosette v0.2 */
!function(t){var e={defaults:{languages:{},current:null,values:{}},process:function(t){null===t.current&&(t.current=Object.keys(t.languages)[0])},control:function(e){var o=!0,r=Object.keys(e.languages);return r.length<1&&(o=!1,console.error("Rosette ERROR: Empty language data")),null!==e.current&&-1===t.inArray(e.current,r)&&(e.current=null,o=!1,console.error("Rosette ERROR: Invalid current language")),o},setup:function(o){var r=Object.keys(this.defaults),n=!0;Object.keys(o).forEach(function(e){-1===t.inArray(e,r)&&(console.error("Rosette ERROR: Invalid setup data"),n=!1)}),n&&(this.defaults=t.extend(!0,{},e.defaults,o))}},o={init:function(t,a){o.controlTarget(t)&&e.control(a)&&(e.process(a),r.build(t,a),n.bind(t))},controlTarget:function(t){var e=!0;return t.is('input[type="text"]')||(e=!1,console.error("Rosette ERROR: Target is not an input type text")),t.is(".rosette")&&(e=!1,console.error("Rosette ERROR: Target is already initialized")),e},openDropdown:function(t){t.data("rosette-dropdown").stop().addClass("open").slideDown(100)},closeDropdown:function(e){var o=t(".rosette-dropdown");void 0!==e&&(o=e.data("rosette-dropdown")),o.stop().removeClass("open").slideUp(100)},destroy:function(t){t.data("rosette-wrap").replaceWith(t),t.removeClass("rosette-input rosette-main"),t.removeData("rosette-wrap").removeData("rosette-dropdown")},getValues:function(e){var o={};return e.data("rosette-wrap").find(".rosette-input").each(function(){var e=t(this),r=e.attr("data-rosette-language"),n=e.val();o[r]=n}),o},setValues:function(e,o){var r=e.data("rosette-wrap"),n=[];r.find(".rosette-input").each(function(){n.push(parseInt(t(this).attr("data-rosette-language")))});var a=!0;Object.keys(o).forEach(function(e){-1===t.inArray(parseInt(e),n)&&(a=!1)}),!0===a?r.find(".rosette-input").each(function(){var e=t(this),r=parseInt(e.attr("data-rosette-language"));e.val(o[r])}):console.error("Rosette ERROR: Invalid values")}},r={build:function(t,e){var o=e.languages,n=e.current,a=t.clone().attr("id","").attr("name","");t.wrap('<div class="rosette rosette-wrap"></div>');var s=t.closest(".rosette-wrap");t.data("rosette-wrap",s),s.css("width",t.css("width")),t.wrap('<div class="rosette-input-container rosette-main"></div>'),t.attr("data-rosette-language",n).addClass("rosette-input rosette-main"),s.append('<div class="rosette-dropdown"></div>');var i=s.find(".rosette-dropdown");t.data("rosette-dropdown",i);for(var u in o)if(o.hasOwnProperty(u)&&u!==n){var c=a.clone();c.attr("data-rosette-language",u).addClass("rosette-input"),i.append(c),c.wrap('<div class="rosette-input-container"></div>')}r.buildButtons(t,e)},buildButtons:function(e,o){var r=e.data("rosette-wrap"),n=t('<div class="rosette-button"></div>');n.css("font-size",e.css("font-size")),r.find(".rosette-input").each(function(){var e=t(this),r=n.clone(),a=e.attr("data-rosette-language");r.text(o.languages[a]),e.closest(".rosette-input-container").append(r)})}},n={bind:function(e){e.data("rosette-wrap").find(".rosette-main .rosette-button").off("click.rosette").on("click.rosette",n.button),t(document).off("click.rosette").on("click.rosette",n.outside)},button:function(){var e=t(this).closest(".rosette-input-container").find(".rosette-input");e.data("rosette-dropdown").is(".open")?o.closeDropdown(e):o.openDropdown(e)},outside:function(e){$target=t(e.target),!$target.is(".rosette")&&$target.closest(".rosette").length<1&&o.closeDropdown()}},a={init:function(r){var n=t.extend(!0,{},e.defaults,r);return this.each(function(){o.init(t(this),n)})},destroy:function(){return this.each(function(){o.destroy(t(this))})},get:function(){var t=this.first();return o.getValues(t)},set:function(e){if("object"==typeof e&&null!==e)return this.each(function(){o.setValues(t(this),e)});console.error("Rosette ERROR: No values provided")}};t.fn.rosette=function(t){if(!(this.length<1)){if(a[t]){var e=Array.prototype.slice.call(arguments,1);return a[t].apply(this,e)}if("object"==typeof t||!t)return a.init.apply(this,arguments);console.error("Rosette ERROR - Invalid method"),console.log(this)}},t.extend({rosetteSetup:function(t){e.setup(t)}})}(jQuery);